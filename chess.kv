WindowManager:
    id: screenManager
    HomePage:
    PvsmScreen:
    PvspScreen:
    # GameUi:
    #     id: gameUi
    
<GameUi>:
    spacing: 0
    orientation: 'horizontal'
    BoxLayout:
        orientation: 'vertical'
        BlackCapturedPieces:
            id: black_captured_pieces
        WhiteCapturedPieces:
            id: white_captured_pieces
    ChessBoardNClocks:
        id: boardNclocks
    Options:
        id: options

#black captured pieces
<BlackCapturedPieces@BoxLayout>:
    canvas.before:
        Color:
            rgba: (129/255,133/255,137/255,1)
        Rectangle:
            size: self.size
            pos: self.pos
    orientation: 'vertical'
    Label:
        text: "Black's captured \n Pieces"
        color: (0,0,0,1)
    BoxLayout:
        orientation: "horizontal"
        Image:
            source:  "./Assets/images/w_pawn.png"
        Label:
            text : "X"
            color: (0,0,0,1)
        Label:
            id: pawn
            text: "0"
            color: (0,0,0,1)
    BoxLayout:
        orientation: "horizontal"
        Image:
            source:  "./Assets/images/w_rook.png"
        Label:
            text : "X"
            color: (0,0,0,1)
        Label:
            id: rook
            text: "0"
            color: (0,0,0,1)
    BoxLayout:
        orientation: "horizontal"
        Image:
            source:  "./Assets/images/w_knight.png"
        Label:
            text : "X"
            color: (0,0,0,1)
        Label:
            id: knight
            text: "0"
            color: (0,0,0,1)
    BoxLayout:
        orientation: "horizontal"
        Image:
            source:  "./Assets/images/w_bishop.png"
        Label:
            text : "X"
            color: (0,0,0,1)
        Label:
            id: bishop
            text: "0"
            color: (0,0,0,1)
    BoxLayout:
        orientation: "horizontal"
        Image:
            source:  "./Assets/images/w_queen.png"
        Label:
            text : "X"
            color: (0,0,0,1)
        Label:
            id: queen
            text: "0"
            color: (0,0,0,1)

<WhiteCapturedPieces@BoxLayout>
    orientation: 'vertical'
    canvas.before:
        Color:
            rgba: (129/255,133/255,137/255,1)
        Rectangle:
            size: self.size
            pos: self.pos
    Label:
        text: "White's captured\n      Pieces"
    BoxLayout:
        orientation: "horizontal"
        Image:
            source:  "./Assets/images/b_pawn.png"
        Label:
            text : "X"
        Label:
            id: pawn
            text: "0"
    BoxLayout:
        orientation: "horizontal"
        Image:
            source:  "./Assets/images/b_rook.png"
        Label:
            text : "X"
        Label:
            id: rook
            text: "0"
    BoxLayout:
        orientation: "horizontal"
        Image:
            source:  "./Assets/images/b_knight.png"
        Label:
            text : "X"
        Label:
            id: knight
            text: "0"
    BoxLayout:
        orientation: "horizontal"
        Image:
            source:  "./Assets/images/b_bishop.png"
        Label:
            text : "X"
        Label:
            id: bishop
            text: "0"
    BoxLayout:
        orientation: "horizontal"
        Image:
            source:  "./Assets/images/b_queen.png"
        Label:
            text : "X"
        Label:
            id: queen
            text: "0"

<ChessBoard>:   

<ChessBoardNClocks@BoxLayout>:
    orientation: 'vertical'
    size_hint: None,None
    width: 600
    height: 630
    BoxLayout:
        id: banners_box
        size_hint: 1,None
        height: 25
        Label:
            id: black_player_banner
            text: "Black Player"
            color: (0,0,0,1)
            size_hint: 2,None
            background_color: (1,0,0,1)
            canvas.before:
                Color:
                    rgba: self.background_color
                Rectangle:
                    size: self.size
                    pos: self.pos
            height: 25
        Label:
            id: black_player_clock
            size_hint: 1,None
            text: "05:00"
            font_size: "30dp"
            height: 26
            font_name: "./fonts/Lcd.ttf"
    ChessBoard:
    BoxLayout:
        size_hint: 1,None
        height: 25
        Label:
            id: white_player_clock
            size_hint: 1,None
            text: "05:00"
            font_size: "30dp"
            font_name: "./fonts/Lcd.ttf"
            height: 20
        Label:
            id: white_player_banner
            text: "White player"
            size_hint: 2,None
            background_color: (120/255,238/255,62/255,1)
            canvas.before:
                Color:
                    rgba: self.background_color
                Rectangle:
                    size: self.size
                    pos: self.pos
            height: 22

<Cell>:

<Options@BoxLayout>:
    orientation: "vertical"
    spacing : 30
    canvas.before:
        Color:
            rgba: (129/255,133/255,137/255,1)
        Rectangle:
            size: self.size
            pos: self.pos
    BoxLayout:
        Button:
            id: undo
            size_hint: 1,None
            height: 200
            Image:
                source: "./Assets/images/undo.jpg"
                allow_stretch: True
                center_x: self.parent.center_x
                center_y: self.parent.center_y
                size: 50,50
        Button:
            size_hint: 1,None
            height: 200
            id: redo
            Image:
                source: "./Assets/images/redo.png"
                allow_stretch: True
                center_x: self.parent.center_x
                center_y: self.parent.center_y
                size: 50,50
    Button: 
        size_hint: 1,None
        height: 80
        id: exit_btn
        Image:
            source: "./Assets/images/exit.png"
            allow_stretch: True
            center_x: self.parent.center_x
            center_y: self.parent.center_y
            size: 50,50
    Label:
        size_hint: 1,None
        height: 120



#==============================================================================
#============================================================================
# +------------------------- Screens --------------------------+

        # +--------- Player VS Machine Screen ---------+
<PvsmScreen>:
    name:"pvsm"
    canvas.before:
        Rectangle:
            pos: self.pos
            size: self.size
            source: './Assets/images/03.jpg'
    BoxLayout:
        orientation:"vertical"
        spacing:10
        BoxLayout:
            orientation:"vertical"
            size_hint: (1, 0.2)
            #pos_hint: {"center_x": 0.5, "center_y": 0.3}
            Label:
                text: "Chess"
                font_size:80
                color:1,0,0,1
                bold:"true"
                size_hint_y: self.texture_size[1]

            Label:
                text: "Match Settings"
                font_size:20
        BoxLayout:   
            size_hint:1,0.2
        BoxLayout:
            orientation:"horizontal"
            pos_hint: {"x": 0.22, "center_y": 0.3}
            size_hint:.5,.1
            spacing:30
            Label:
                text:" Difficulty"
                bold:"true"
                size_hint_x:.1
                font_size:20
            BoxLayout:
                size_hint:.25,1
                spacing:5
                Button:
                    text:"Easy"
                    size_hint_x:.1
                    bold:"true"
                    font_size:15
                    on_press:root.on_level_button_click(self,1)
                    disabled:root.level_clicked1
                    #color : 0,.7,0,1
                Button:
                    text:"Medium"
                    size_hint_x:.1
                    bold:"true"
                    font_size:15
                    on_press:root.on_level_button_click(self,2)
                    disabled:root.level_clicked2
                    #color : .8,.8,0,1
                Button:
                    text:"Hard"
                    size_hint_x:.1
                    bold:"true"
                    font_size:15
                    on_press:root.on_level_button_click(self,3)
                    disabled:root.level_clicked3
                    #color : .8,0,0,1
        BoxLayout:
            orientation:"horizontal"
            pos_hint: {"x": 0.22, "center_y": 0.3}
            size_hint:.5,.15
            spacing:30
            Label:
                text:"Play As"
                bold:"true"
                size_hint_x:.1
                font_size:20
            BoxLayout:
                size_hint:.25,1
                spacing:10
                Button:
                    text:"White"
                    size_hint:.3,1
                    bold:"true"
                    disabled : root.color_clicked
                    on_press: root.on_color_button_click(self)
                    Image:
                        source: './Assets/images/w_king.png'
                        # y: self.parent.y + self.parent.height -85
                        # x: self.parent.x +26
                        # size:80,80

                        size_hint: (None, None)
                        allow_stretch: True
                        size: 80, 80
                        center_x: self.parent.center_x
                        center_y: self.parent.center_y

                        #allow_stretch: True
                Button:
                    text:"Black"
                    size_hint:.3,1
                    bold:"true"
                    disabled : not root.color_clicked
                    on_press:  root.on_color_button_click(self)
                    Image:
                        source: './Assets/images/b_king.png'
                        # y: self.parent.y + self.parent.height -85
                        # x: self.parent.x +26
                        # size:80,80

                        size_hint: (None, None)
                        allow_stretch: True
                        size: 80, 80
                        center_x: self.parent.center_x
                        center_y: self.parent.center_y

                        #allow_stretch: True
        BoxLayout:   
            size_hint:1,0.2
        BoxLayout:
            orientation:"horizontal"
            size_hint:.9,.1
            pos_hint: {"center_x": 0.5, "y": 0.8}
            spacing:400
            Button:
                text:"Back"
                bold:"true"
                size_hint_x:.1
                on_press:
                    root.manager.transition.direction= "right"
                    root.manager.current = "home"
            Button:
                size_hint_x:.1
                bold:"true"
                text:"Play"
                on_press: root.init_game()
        
                
               


                                                         
            # +--------- Player VS Player Screen ---------+

<PvspScreen>:
    name:"pvsp"
    canvas.before:
        Rectangle:
            pos: self.pos
            size: self.size
            source: './Assets/images/03.jpg'
    BoxLayout:
        orientation:"vertical"
        spacing:10
        BoxLayout:
            orientation:"vertical"
            size_hint: (1, 0.2)
            #pos_hint: {"center_x": 0.5, "center_y": 0.3}
            Label:
                text: "Chess"
                font_size:80
                color:1,0,0,1
                bold:"true"
                size_hint_y: self.texture_size[1]

            Label:
                text: "Match Settings"
                font_size:20
        BoxLayout:   
            size_hint:1,0.25
        BoxLayout:
            orientation:"horizontal"
            pos_hint: {"x": 0.22, "center_y": 0.3}
            size_hint:.5,.2
            spacing:30
            Label:
                text:"Play As"
                bold:"true"
                size_hint_x:.1
                font_size:20
            BoxLayout:
                size_hint:.2,1
                spacing:10
                Button:
                    text:"White"
                    size_hint:.3,1
                    bold:"true"
                    disabled : root.color_clicked
                    on_press: root.on_color_button_click(self)
                    Image:
                        source: './Assets/images/w_king.png'
                        # y: self.parent.y + self.parent.height -100
                        # x: self.parent.x +12
                        size_hint: (None, None)
                        allow_stretch: True
                        size: 100, 100
                        center_x: self.parent.center_x
                        center_y: self.parent.center_y
                        
                Button:
                    text:"Black"
                    size_hint:.3,1
                    bold:"true"
                    disabled : not root.color_clicked
                    on_press: root.on_color_button_click(self)
                    Image:
                        source: './Assets/images/b_king.png'
                        # y: self.parent.y + self.parent.height -100
                        # x: self.parent.x +12

                        size_hint: (None, None)
                        allow_stretch: True
                        size: 100, 100
                        center_x: self.parent.center_x
                        center_y: self.parent.center_y

                        #allow_stretch: True
        BoxLayout:   
            size_hint:1,0.3
        BoxLayout:
            orientation:"horizontal"
            size_hint:.9,.1
            pos_hint: {"center_x": 0.5, "center_y": 0.3}
            spacing:400
            Button:
                text:"Back"
                bold:"true"
                size_hint_x:.1
                on_press:
                    root.manager.transition.direction= "right"
                    root.manager.current = "home"
            Button:
                size_hint_x:.1
                bold:"true"
                text:"Play"
                on_press: root.init_game()
        

# +---------------------- Home Page ----------------------------+
<HomePage>:
    name:"home"
    canvas.before:
        Rectangle:
            pos: self.pos
            size: self.size
            source: './Assets/images/01.jpg'

    BoxLayout:
        orientation:"vertical"
        size_hint:.6,.7
        spacing:"100dp"
        pos_hint: {"center_x": 0.5, "y": 0.25}
        Label:
            text:"Chess Game"
            bold:"true"
            font_size:80
            color:0,0,0,1
            
        BoxLayout:
            orientation:"vertical"
            spacing:"30dp"
            size_hint:None,None
            height:250
            width:380
            pos_hint:{"center_x":0.52}
            
            Button:
                text:"Player VS Player"
                on_press : 
                    root.manager.current = "pvsp"
                    root.manager.transition.direction = "left"
                bold:"true"
                font_size:18
                

            Button:
                text:"Player VS Machine"
                bold:"true"
                on_press:
                    root.manager.current = "pvsm"
                    root.manager.transition.direction = "left"
                font_size:18
            Button:
                text:"Statistics"
                bold:"true"
                font_size:18
            
    
    BoxLayout:
        orientation:"horizontal"
        size_hint:.4,.1
        pos_hint:{"center_x":.52,"y":.05}
        spacing:30
        Button:
            text: "Quit"
            bold:"true"
            font_size:18
            
        Button:
            text: "Load Game"
            bold:"true"
            font_size:18